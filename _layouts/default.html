<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page.title | default: site.title }}</title>
    <meta name="description" content="{{ page.description | default: site.description }}">
    
    {% if page.theme == 'blue' %}
        <link rel="stylesheet" href="{{ '/assets/css/blue-theme.css' | relative_url }}">
    {% elsif page.theme == 'red' %}
        <link rel="stylesheet" href="{{ '/assets/css/red-theme.css' | relative_url }}">
        <script src="https://unpkg.com/htmx.org@1.9.10" integrity="sha384-D1Kt99CQMDuVetoL1lrYwg5t+9QdHe7NLX/SoJYkXDFfX37iInKRy5xLSi8nO7UC" crossorigin="anonymous"></script>
    {% else %}
        <link rel="stylesheet" href="{{ '/assets/css/main.css' | relative_url }}">
    {% endif %}
    
    <!-- SEO and structured data -->
    <meta property="og:title" content="{{ page.title | default: site.title }}">
    <meta property="og:description" content="{{ page.description | default: site.description }}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ page.url | absolute_url }}">
    <meta property="og:site_name" content="{{ site.title }}">
    {% if page.image %}
        <meta property="og:image" content="{{ page.image | absolute_url }}">
        <meta property="og:image:alt" content="{{ page.title | default: site.title }}">
    {% elsif site.logo %}
        <meta property="og:image" content="{{ site.logo | absolute_url }}">
        <meta property="og:image:alt" content="{{ site.title }}">
    {% endif %}
    
    <!-- Twitter Card metadata -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{ page.title | default: site.title }}">
    <meta name="twitter:description" content="{{ page.description | default: site.description }}">
    {% if page.image %}
        <meta name="twitter:image" content="{{ page.image | absolute_url }}">
        <meta name="twitter:image:alt" content="{{ page.title | default: site.title }}">
    {% elsif site.logo %}
        <meta name="twitter:image" content="{{ site.logo | absolute_url }}">
        <meta name="twitter:image:alt" content="{{ site.title }}">
    {% endif %}
    {% if site.twitter_username %}
        <meta name="twitter:site" content="@{{ site.twitter_username }}">
        <meta name="twitter:creator" content="@{{ site.twitter_username }}">
    {% endif %}
    
    <!-- Security headers -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://unpkg.com; style-src 'self' 'unsafe-inline'; img-src 'self' data:;">
</head>
<body>
    {% include header.html %}
    
    {% if page.theme == 'red' %}
        <div class="flames"></div>
    {% endif %}
    
    {{ content }}
    
    {% include footer.html %}
</body>
</html>
