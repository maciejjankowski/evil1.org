---
layout: default
---

<div class="early-section">
    <div class="early-section-header">{{ page.title }}</div>
    <div class="early-section-content">
        {% if page.icon %}
        <div style="text-align: center; margin-bottom: 40px;">
            <div style="font-size: 4em; margin-bottom: 20px;">{{ page.icon }}</div>
            {% if page.subtitle %}
            <h2 style="color: #003366; margin-bottom: 10px;">{{ page.subtitle }}</h2>
            {% endif %}
            {% if page.message %}
            <p style="font-size: 18px; color: #666;">{{ page.message }}</p>
            {% endif %}
        </div>
        {% endif %}

        <div style="max-width: 600px; margin: 0 auto;">
            {% if page.main_sections %}
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; margin-bottom: 40px;">
                {% for section in page.main_sections %}
                <div class="early-article" style="text-align: center;">
                    <div class="early-article-header">
                        <h3 class="early-article-title">{{ section.title }}</h3>
                    </div>
                    <div class="early-article-content">
                        <p>{{ section.content }}</p>
                        
                        {% if section.next_steps %}
                        <p style="margin-top: 15px;"><strong>{{ section.next_steps.title }}</strong></p>
                        <ul style="text-align: left;">
                            {% for step in section.next_steps.items %}
                            <li>{{ step }}</li>
                            {% endfor %}
                        </ul>
                        {% endif %}

                        {% if section.membership_benefits %}
                        <div id="membership-benefits" style="margin-top: 15px;">
                            <!-- Benefits will be populated by JavaScript -->
                            <p>Loading your membership benefits...</p>
                        </div>
                        {% endif %}

                        {% if section.action_buttons %}
                        <div style="margin-top: 15px;">
                            {% for button in section.action_buttons %}
                            <a href="{{ button.url }}" class="{{ button.class }}">{{ button.text }}</a>
                            {% endfor %}
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
            {% endif %}

            {% if page.next_steps_section %}
            <div class="early-section" style="margin-top: 40px;">
                <div class="early-section-header">{{ page.next_steps_section.title }}</div>
                <div class="early-section-content">
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                        {% for item in page.next_steps_section.items %}
                        <div class="early-article">
                            <div class="early-article-header">
                                <h3 class="early-article-title">{{ item.title }}</h3>
                            </div>
                            <div class="early-article-content">
                                <p>{{ item.description }}</p>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
            {% endif %}

            {% if page.explanation %}
            <div class="early-article">
                <div class="early-article-content">
                    <h3 style="text-align: center; color: #003366;">{{ page.explanation.title }}</h3>
                    <p>{{ page.explanation.intro }}</p>

                    {% if page.explanation.reasons %}
                    <ul style="margin: 20px 0;">
                        {% for reason in page.explanation.reasons %}
                        <li>{{ reason }}</li>
                        {% endfor %}
                    </ul>
                    {% endif %}

                    {% if page.warning %}
                    <div style="background: #FFF3CD; border: 1px solid #FFEAA7; border-radius: 4px; padding: 15px; margin: 20px 0;">
                        <strong>{{ page.warning.title }}</strong> {{ page.warning.message }}
                    </div>
                    {% endif %}
                </div>
            </div>
            {% endif %}

            {% if page.cta_section %}
            <div style="text-align: center; margin-top: 30px;">
                <h3 style="color: #003366;">{{ page.cta_section.title }}</h3>
                <p style="margin-bottom: 20px;">{{ page.cta_section.subtitle }}</p>

                {% if page.cta_section.buttons %}
                <div style="display: flex; gap: 15px; justify-content: center; flex-wrap: wrap;">
                    {% for button in page.cta_section.buttons %}
                    <a href="{{ button.url }}" class="{{ button.class }}">{{ button.text }}</a>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            {% endif %}

            {% if page.help_section %}
            <div class="early-article" style="margin-top: 30px;">
                <div class="early-article-header">
                    <h3 class="early-article-title">{{ page.help_section.title }}</h3>
                </div>
                <div class="early-article-content">
                    <p>{{ page.help_section.intro }}</p>

                    {% if page.help_section.columns %}
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-top: 15px;">
                        {% for column in page.help_section.columns %}
                        <div>
                            <h4>{{ column.title }}</h4>
                            <ul>
                                {% for item in column.items %}
                                <li>
                                    {% if item.url %}
                                    <a href="{{ item.url }}">{{ item.text }}</a>
                                    {% else %}
                                    {{ item.text }}
                                    {% endif %}
                                </li>
                                {% endfor %}
                            </ul>
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}
                </div>
            </div>
            {% endif %}

            {% if page.support_section %}
            <div style="text-align: center; margin-top: 40px; padding: 30px; background: #F8F8F8; border-radius: 8px;">
                <h3 style="color: #003366; margin-bottom: 15px;">{{ page.support_section.title }}</h3>
                <p style="margin-bottom: 20px;">{{ page.support_section.subtitle }}</p>
                <a href="{{ page.support_section.cta.url }}" class="{{ page.support_section.cta.class }}" style="background: #003366; color: white; padding: 12px 24px; text-decoration: none; border-radius: 4px; font-size: 16px;">{{ page.support_section.cta.text }}</a>
            </div>
            {% endif %}

            {% if page.benefits_section %}
            <div style="text-align: center; margin-top: 30px; padding: 20px; background: #F8F8F8; border-radius: 8px;">
                <h4 style="color: #003366; margin-bottom: 10px;">{{ page.benefits_section.title }}</h4>
                <p style="margin-bottom: 15px;">{{ page.benefits_section.subtitle }}</p>
                {% if page.benefits_section.benefits %}
                <div style="font-size: 14px; color: #666;">
                    {% for benefit in page.benefits_section.benefits %}
                    <p>âœ… {{ benefit }}</p>
                    {% endfor %}
                </div>
                {% endif %}
            </div>
            {% endif %}

            {{ content }}
        </div>
    </div>
</div>

{% if page.membership_plans %}
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Get membership type from URL parameters or localStorage
    const urlParams = new URLSearchParams(window.location.search);
    const membershipType = urlParams.get('plan') || localStorage.getItem('selectedPlan') || 'supporter';

    const benefits = {
        {% for plan in page.membership_plans %}
        {{ plan[0] }}: [
            {% for benefit in plan[1] %}
            '{{ benefit }}'{% unless forloop.last %},{% endunless %}
            {% endfor %}
        ]{% unless forloop.last %},{% endunless %}
        {% endfor %}
    };

    const benefitsDiv = document.getElementById('membership-benefits');
    if (benefitsDiv) {
        const planBenefits = benefits[membershipType] || benefits.supporter;
        
        benefitsDiv.innerHTML = '<ul style="text-align: left; display: inline-block;">' +
            planBenefits.map(benefit => `<li>${benefit}</li>`).join('') +
            '</ul>';
    }
});
</script>
{% endif %}
