<!-- Provocative Language DLC Dark Pattern Widget -->
<div class="provocative-language-widget" data-content-type="{{ include.content_type | default: 'investigation' }}">
  
  <!-- Language Intensity Control -->
  <div class="language-controls">
    <div class="intensity-selector">
      <h4>🌶️ Content Intensity Level</h4>
      <div class="intensity-bar">
        <div class="intensity-level free active" data-level="1">
          <span class="level-icon">😇</span>
          <span class="level-name">Mild</span>
          <span class="level-status">FREE</span>
        </div>
        <div class="intensity-level premium locked" data-level="2" onclick="showLanguageModal('spicy')">
          <span class="level-icon">🌶️</span>
          <span class="level-name">Spicy</span>
          <span class="level-status">$7/mo</span>
        </div>
        <div class="intensity-level premium locked" data-level="3" onclick="showLanguageModal('savage')">
          <span class="level-icon">🔥</span>
          <span class="level-name">Savage</span>
          <span class="level-status">$15/mo</span>
        </div>
        <div class="intensity-level premium locked" data-level="4" onclick="showLanguageModal('nuclear')">
          <span class="level-icon">☢️</span>
          <span class="level-name">Nuclear</span>
          <span class="level-status">$30/mo</span>
        </div>
      </div>
    </div>
    
    <div class="current-sample">
      <h5>Current Language Level Sample:</h5>
      <div class="sample-text" id="languageSample">
        <div class="free-sample">
          "The corporate executive made questionable decisions that negatively impacted consumers and stakeholders."
        </div>
      </div>
      
      <div class="upgrade-prompt">
        <p>🔒 <strong>Unlock more provocative language</strong> to see how we really describe corporate crimes</p>
        <button class="upgrade-language-btn" onclick="showLanguageModal('overview')">
          🌶️ Upgrade Language Pack
        </button>
      </div>
    </div>
  </div>
  
  <!-- Language Pack Modal -->
  <div class="language-modal hidden" id="languageModal">
    <div class="modal-backdrop" onclick="closeLanguageModal()"></div>
    <div class="modal-container">
      <div class="modal-header">
        <h3>🌶️ Provocative Language Subscription</h3>
        <button onclick="closeLanguageModal()" class="close-btn">&times;</button>
      </div>
      
      <div class="modal-body">
        <div class="language-showcase">
          <h4>💥 Unleash the Full Power of Corporate Criticism</h4>
          <p>See how different subscription levels transform bland corporate speak into powerful exposés</p>
          
          <div class="language-comparison">
            <div class="comparison-samples">
              <div class="sample-tier free">
                <h5>😇 Free Tier - Corporate Friendly</h5>
                <div class="sample-quote">
                  "The company engaged in practices that some stakeholders found concerning."
                </div>
              </div>
              
              <div class="sample-tier spicy">
                <h5>🌶️ Spicy Tier - Pointed Criticism</h5>
                <div class="sample-quote">
                  "The company deliberately deceived customers while executives lined their own pockets."
                </div>
              </div>
              
              <div class="sample-tier savage">
                <h5>🔥 Savage Tier - No Holds Barred</h5>
                <div class="sample-quote">
                  "These corporate parasites systematically exploited vulnerable consumers to fund their obscene wealth accumulation."
                </div>
              </div>
              
              <div class="sample-tier nuclear">
                <h5>☢️ Nuclear Tier - Apocalyptic Truth</h5>
                <div class="sample-quote blurred-nuclear">
                  "These [EXTREMELY INTENSE LANGUAGE] corporate [VERY HARSH CRITICISM] destroyed lives while [NUCLEAR-LEVEL CONDEMNATION] in their golden parachutes."
                </div>
                <p class="nuclear-warning">⚠️ Maximum intensity language - subscriber discretion advised</p>
              </div>
            </div>
          </div>
        </div>
        
        <div class="language-pricing">
          <div class="pricing-tier spicy">
            <h5>🌶️ Spicy Language</h5>
            <div class="price">$7<span>/month</span></div>
            <ul>
              <li>Pointed corporate criticism</li>
              <li>Executive accountability language</li>
              <li>Shareholder condemnation</li>
              <li>Regulatory failure callouts</li>
            </ul>
            <button class="btn btn-spicy" onclick="selectLanguageTier('spicy')">
              Get Spicy Language
            </button>
          </div>
          
          <div class="pricing-tier savage featured">
            <div class="popular-badge">Most Popular</div>
            <h5>🔥 Savage Language</h5>
            <div class="price">$15<span>/month</span></div>
            <ul>
              <li>Everything in Spicy</li>
              <li>No-holds-barred corporate takedowns</li>
              <li>Systemic corruption exposure</li>
              <li>Class warfare vocabulary</li>
              <li>Executive lifestyle shaming</li>
            </ul>
            <button class="btn btn-savage" onclick="selectLanguageTier('savage')">
              Go Savage
            </button>
          </div>
          
          <div class="pricing-tier nuclear">
            <h5>☢️ Nuclear Language</h5>
            <div class="price">$30<span>/month</span></div>
            <ul>
              <li>Everything in Savage</li>
              <li>Maximum intensity criticism</li>
              <li>Revolutionary language</li>
              <li>Apocalyptic economic commentary</li>
              <li>Subscriber-only vocabulary</li>
              <li>Custom corporate insults</li>
            </ul>
            <button class="btn btn-nuclear" onclick="selectLanguageTier('nuclear')">
              Go Nuclear
            </button>
          </div>
        </div>
        
        <div class="language-features">
          <h4>📝 Premium Language Features</h4>
          <div class="feature-grid">
            <div class="feature-item">
              <div class="feature-icon">🎯</div>
              <div class="feature-text">
                <strong>Targeted Criticism</strong>
                <small>Personalized language for specific executives</small>
              </div>
            </div>
            <div class="feature-item">
              <div class="feature-icon">📊</div>
              <div class="feature-text">
                <strong>Impact Metrics</strong>
                <small>See how provocative language increases engagement</small>
              </div>
            </div>
            <div class="feature-item">
              <div class="feature-icon">🔥</div>
              <div class="feature-text">
                <strong>Intensity Scaling</strong>
                <small>Adjust language heat based on corporate crime severity</small>
              </div>
            </div>
            <div class="feature-item">
              <div class="feature-icon">💬</div>
              <div class="feature-text">
                <strong>Community Suggestions</strong>
                <small>Crowdsourced corporate insults from subscribers</small>
              </div>
            </div>
          </div>
        </div>
        
        <div class="content-warning">
          <h4>⚠️ Content Advisory</h4>
          <div class="warning-levels">
            <div class="warning-level">
              <span class="warning-icon">🌶️</span>
              <span class="warning-text">Spicy: Strong corporate criticism, suitable for most readers</span>
            </div>
            <div class="warning-level">
              <span class="warning-icon">🔥</span>
              <span class="warning-text">Savage: Intense language, explicit corporate condemnation</span>
            </div>
            <div class="warning-level">
              <span class="warning-icon">☢️</span>
              <span class="warning-text">Nuclear: Maximum intensity, revolutionary rhetoric</span>
            </div>
          </div>
        </div>
        
        <div class="alternative-access">
          <h4>🎲 Alternative Access Options</h4>
          <div class="alt-buttons">
            <button class="btn-alt challenge" onclick="takeLanguageChallenge()">
              🧠 Corporate Insult Quiz
            </button>
            <button class="btn-alt social" onclick="shareForLanguage()">
              📱 Share for Spicy Access
            </button>
            <button class="btn-alt feedback" onclick="submitLanguageFeedback()">
              💭 Suggest Insults for Premium
            </button>
          </div>
        </div>
        
        <div class="language-stats">
          <h4>📈 Community Language Stats</h4>
          <div class="stats-grid">
            <div class="stat-item">
              <span class="stat-number">67%</span>
              <span class="stat-label">Prefer Savage Level</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">2.3x</span>
              <span class="stat-label">Higher Engagement</span>
            </div>
            <div class="stat-item">
              <span class="stat-number">94%</span>
              <span class="stat-label">Say It's Worth It</span>
            </div>
          </div>
        </div>
        
        <div class="dark-pattern-education">
          <details>
            <summary>🎭 Dark Pattern Alert: Content Intensity Monetization</summary>
            <p><strong>Educational Notice:</strong> This demonstrates how platforms monetize language and content intensity:</p>
            <ul>
              <li><strong>Artificial Content Restriction:</strong> Limiting expression intensity to drive subscriptions</li>
              <li><strong>Graduated Access:</strong> Multiple tiers for what should be editorial choices</li>
              <li><strong>FOMO Creation:</strong> Making users feel they're missing "authentic" content</li>
              <li><strong>Community Pressure:</strong> Using stats to suggest others pay for language access</li>
              <li><strong>Alternative Currencies:</strong> Trading engagement for temporary access</li>
              <li><strong>Content Gatekeeping:</strong> Monetizing authentic expression</li>
            </ul>
            <p>Some news sites, social platforms, and content creators use language restrictions and "premium vocabulary" to create artificial scarcity around expression itself.</p>
          </details>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.provocative-language-widget {
  margin: 20px 0;
  background: white;
  border-radius: 16px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  overflow: hidden;
}

.language-controls {
  padding: 25px;
  background: linear-gradient(135deg, #fd79a8, #fdcb6e);
}

.intensity-selector h4 {
  margin: 0 0 20px 0;
  color: #2d3436;
  text-align: center;
  font-size: 1.4rem;
}

.intensity-bar {
  display: flex;
  justify-content: space-between;
  margin-bottom: 25px;
  gap: 10px;
}

.intensity-level {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 15px 10px;
  background: rgba(255, 255, 255, 0.9);
  border-radius: 12px;
  border: 3px solid transparent;
  cursor: pointer;
  transition: all 0.3s ease;
  text-align: center;
}

.intensity-level.active {
  border-color: #00b894;
  background: #d5f4e6;
}

.intensity-level.locked {
  opacity: 0.7;
  border-color: #ddd;
}

.intensity-level:hover:not(.active) {
  transform: translateY(-3px);
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
}

.level-icon {
  font-size: 2rem;
  margin-bottom: 8px;
  display: block;
}

.level-name {
  font-weight: bold;
  color: #2d3436;
  margin-bottom: 5px;
  font-size: 1rem;
}

.level-status {
  font-size: 0.8rem;
  color: #636e72;
  font-weight: 500;
}

.intensity-level.locked .level-status {
  color: #e17055;
  font-weight: bold;
}

.current-sample {
  background: rgba(255, 255, 255, 0.9);
  padding: 20px;
  border-radius: 12px;
  border: 2px solid rgba(255, 255, 255, 0.3);
}

.current-sample h5 {
  margin: 0 0 15px 0;
  color: #2d3436;
  font-size: 1.1rem;
}

.sample-text {
  background: white;
  padding: 15px;
  border-radius: 8px;
  border-left: 4px solid #fd79a8;
  margin-bottom: 15px;
  font-style: italic;
  line-height: 1.5;
}

.upgrade-prompt {
  text-align: center;
}

.upgrade-prompt p {
  margin: 0 0 15px 0;
  color: #2d3436;
}

.upgrade-language-btn {
  background: linear-gradient(135deg, #fd79a8, #e84393);
  color: white;
  border: none;
  padding: 12px 25px;
  border-radius: 25px;
  cursor: pointer;
  font-weight: bold;
  font-size: 1rem;
  transition: all 0.3s;
}

.upgrade-language-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 15px rgba(232, 67, 147, 0.3);
}

.language-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
}

.language-modal.hidden {
  display: none;
}

.modal-backdrop {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.85);
}

.modal-container {
  background: white;
  border-radius: 16px;
  max-width: 1100px;
  width: 100%;
  max-height: 90vh;
  overflow-y: auto;
  position: relative;
  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 25px;
  background: linear-gradient(135deg, #fd79a8, #e84393);
  color: white;
  border-radius: 16px 16px 0 0;
}

.modal-header h3 {
  margin: 0;
  font-size: 1.6rem;
}

.close-btn {
  background: none;
  border: none;
  color: white;
  font-size: 2rem;
  cursor: pointer;
  padding: 0;
  width: 35px;
  height: 35px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 50%;
  transition: background 0.3s;
}

.close-btn:hover {
  background: rgba(255, 255, 255, 0.2);
}

.modal-body {
  padding: 30px;
}

.language-showcase {
  text-align: center;
  margin-bottom: 30px;
  padding: 25px;
  background: linear-gradient(135deg, #ffeaa7, #fdcb6e);
  border-radius: 16px;
}

.language-showcase h4 {
  margin: 0 0 10px 0;
  color: #2d3436;
  font-size: 1.4rem;
}

.language-comparison {
  margin: 25px 0;
}

.comparison-samples {
  display: grid;
  gap: 20px;
}

.sample-tier {
  background: white;
  padding: 20px;
  border-radius: 12px;
  border-left: 4px solid #ddd;
  text-align: left;
}

.sample-tier.free {
  border-left-color: #74b9ff;
}

.sample-tier.spicy {
  border-left-color: #fdcb6e;
}

.sample-tier.savage {
  border-left-color: #e17055;
}

.sample-tier.nuclear {
  border-left-color: #d63031;
}

.sample-tier h5 {
  margin: 0 0 10px 0;
  font-size: 1.1rem;
}

.sample-quote {
  font-style: italic;
  line-height: 1.5;
  color: #2d3436;
  padding: 10px;
  background: #f8f9fa;
  border-radius: 8px;
  margin-bottom: 10px;
}

.blurred-nuclear {
  filter: blur(2px);
  background: linear-gradient(90deg, #ff6b6b, #ee5a24);
  color: white;
  font-weight: bold;
}

.nuclear-warning {
  font-size: 0.8rem;
  color: #d63031;
  font-weight: bold;
  margin: 0;
  text-align: center;
}

.language-pricing {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 20px;
  margin-bottom: 30px;
}

.pricing-tier {
  border: 2px solid #ddd;
  border-radius: 16px;
  padding: 25px;
  text-align: center;
  position: relative;
  background: white;
  transition: all 0.3s ease;
}

.pricing-tier:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
}

.pricing-tier.featured {
  border-color: #e17055;
  box-shadow: 0 5px 25px rgba(225, 112, 85, 0.3);
  transform: scale(1.02);
}

.pricing-tier.spicy {
  border-color: #fdcb6e;
}

.pricing-tier.savage {
  border-color: #e17055;
}

.pricing-tier.nuclear {
  border-color: #d63031;
}

.popular-badge {
  position: absolute;
  top: -12px;
  left: 50%;
  transform: translateX(-50%);
  background: #e17055;
  color: white;
  padding: 6px 16px;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: bold;
}

.pricing-tier h5 {
  margin: 0 0 15px 0;
  color: #2d3436;
  font-size: 1.2rem;
}

.price {
  font-size: 2rem;
  font-weight: bold;
  margin-bottom: 20px;
}

.pricing-tier.spicy .price {
  color: #fdcb6e;
}

.pricing-tier.savage .price {
  color: #e17055;
}

.pricing-tier.nuclear .price {
  color: #d63031;
}

.price span {
  font-size: 1rem;
  color: #636e72;
}

.pricing-tier ul {
  list-style: none;
  padding: 0;
  margin: 0 0 25px 0;
  text-align: left;
}

.pricing-tier li {
  padding: 8px 0;
  border-bottom: 1px solid #f0f0f0;
  position: relative;
  padding-left: 25px;
  font-size: 0.95rem;
}

.pricing-tier li:before {
  content: "🌶️";
  position: absolute;
  left: 0;
  font-size: 0.9rem;
}

.pricing-tier.savage li:before {
  content: "🔥";
}

.pricing-tier.nuclear li:before {
  content: "☢️";
}

.btn {
  background: #0984e3;
  color: white;
  border: none;
  padding: 15px 25px;
  border-radius: 25px;
  cursor: pointer;
  font-weight: bold;
  width: 100%;
  transition: all 0.3s;
  font-size: 1rem;
}

.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
}

.btn-spicy {
  background: linear-gradient(135deg, #fdcb6e, #e17055);
}

.btn-savage {
  background: linear-gradient(135deg, #e17055, #d63031);
}

.btn-nuclear {
  background: linear-gradient(135deg, #d63031, #a29bfe);
}

.language-features {
  background: #f8f9fa;
  padding: 25px;
  border-radius: 16px;
  margin-bottom: 25px;
}

.language-features h4 {
  text-align: center;
  margin-bottom: 20px;
  color: #2d3436;
}

.feature-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
}

.feature-item {
  display: flex;
  align-items: center;
  gap: 15px;
  background: white;
  padding: 15px;
  border-radius: 12px;
  border: 1px solid #ddd;
}

.feature-icon {
  font-size: 2rem;
  min-width: 40px;
}

.feature-text strong {
  display: block;
  margin-bottom: 5px;
  color: #2d3436;
}

.feature-text small {
  color: #636e72;
  font-size: 0.85rem;
}

.content-warning {
  background: #fff3cd;
  padding: 20px;
  border-radius: 12px;
  border: 2px solid #ffeaa7;
  margin-bottom: 25px;
}

.content-warning h4 {
  margin: 0 0 15px 0;
  color: #856404;
  text-align: center;
}

.warning-levels {
  display: grid;
  gap: 10px;
}

.warning-level {
  display: flex;
  align-items: center;
  gap: 15px;
  padding: 10px;
  background: rgba(255, 255, 255, 0.7);
  border-radius: 8px;
}

.warning-icon {
  font-size: 1.5rem;
  min-width: 30px;
}

.warning-text {
  font-size: 0.95rem;
  color: #2d3436;
}

.alternative-access {
  border-top: 2px solid #eee;
  padding-top: 25px;
  margin-bottom: 25px;
}

.alternative-access h4 {
  text-align: center;
  margin-bottom: 20px;
  color: #2d3436;
}

.alt-buttons {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 15px;
}

.btn-alt {
  background: #a29bfe;
  color: white;
  border: none;
  padding: 12px 15px;
  border-radius: 12px;
  cursor: pointer;
  font-size: 0.9rem;
  transition: all 0.3s;
  font-weight: 500;
}

.btn-alt:hover {
  transform: translateY(-3px);
  box-shadow: 0 5px 15px rgba(162, 155, 254, 0.3);
}

.btn-alt.challenge { background: #fd79a8; }
.btn-alt.social { background: #00b894; }
.btn-alt.feedback { background: #fdcb6e; color: #2d3436; }

.language-stats {
  background: linear-gradient(135deg, #ff9a9e, #fecfef);
  padding: 25px;
  border-radius: 16px;
  text-align: center;
  margin-bottom: 25px;
}

.language-stats h4 {
  margin: 0 0 20px 0;
  color: #2d3436;
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 20px;
}

.stat-item {
  background: rgba(255, 255, 255, 0.9);
  padding: 15px;
  border-radius: 12px;
  text-align: center;
}

.stat-number {
  display: block;
  font-size: 1.8rem;
  font-weight: bold;
  color: #e84393;
  line-height: 1;
}

.stat-label {
  font-size: 0.8rem;
  color: #636e72;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  margin-top: 5px;
  display: block;
}

.dark-pattern-education {
  background: #fff3cd;
  border: 1px solid #ffeaa7;
  border-radius: 16px;
  padding: 25px;
}

.dark-pattern-education summary {
  cursor: pointer;
  font-weight: bold;
  color: #856404;
  margin-bottom: 15px;
  font-size: 1.1rem;
}

.dark-pattern-education ul {
  margin: 15px 0 0 25px;
}

.dark-pattern-education li {
  margin-bottom: 8px;
  font-size: 0.95rem;
}

/* Responsive */
@media (max-width: 768px) {
  .intensity-bar {
    flex-direction: column;
    gap: 10px;
  }
  
  .intensity-level {
    flex-direction: row;
    justify-content: space-between;
    text-align: left;
    padding: 12px 15px;
  }
  
  .level-icon {
    margin-bottom: 0;
    min-width: 40px;
  }
  
  .language-pricing {
    grid-template-columns: 1fr;
  }
  
  .pricing-tier.featured {
    transform: none;
  }
  
  .feature-grid {
    grid-template-columns: 1fr;
  }
  
  .stats-grid {
    grid-template-columns: 1fr;
    gap: 10px;
  }
  
  .alt-buttons {
    grid-template-columns: 1fr;
  }
}

/* Language intensity animations */
.spicy-effect {
  animation: spicyPulse 0.5s ease;
}

.savage-effect {
  animation: savageShake 0.6s ease;
}

.nuclear-effect {
  animation: nuclearGlow 1s ease;
}

@keyframes spicyPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); background-color: #fdcb6e; }
}

@keyframes savageShake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}

@keyframes nuclearGlow {
  0%, 100% { box-shadow: none; }
  50% { box-shadow: 0 0 20px #d63031; }
}
</style>

<script>
// Provocative Language System
class ProvocativeLanguageSystem {
  constructor() {
    this.userTier = localStorage.getItem('languageTier') || 'free';
    this.sampleTexts = {
      free: "The corporate executive made questionable decisions that negatively impacted consumers and stakeholders.",
      spicy: "The corporate executive deliberately deceived customers while enriching shareholders at public expense.",
      savage: "These corporate parasites systematically exploited vulnerable consumers to fund their obscene wealth accumulation.",
      nuclear: "These [REDACTED] corporate [REDACTED] destroyed lives while [REDACTED] in their golden parachutes of greed."
    };
    this.initializeSystem();
  }
  
  initializeSystem() {
    this.updateLanguageDisplay();
    this.updateIntensityBar();
  }
  
  updateLanguageDisplay() {
    const sampleEl = document.getElementById('languageSample');
    if (sampleEl) {
      const tierClass = this.userTier === 'free' ? 'free-sample' : `${this.userTier}-sample`;
      sampleEl.innerHTML = `
        <div class="${tierClass}">
          ${this.sampleTexts[this.userTier]}
        </div>
      `;
    }
  }
  
  updateIntensityBar() {
    const levels = document.querySelectorAll('.intensity-level');
    levels.forEach(level => {
      level.classList.remove('active');
    });
    
    // Activate appropriate level based on tier
    const levelMap = { free: 1, spicy: 2, savage: 3, nuclear: 4 };
    const activeLevel = levelMap[this.userTier] || 1;
    
    const activeLevelEl = document.querySelector(`[data-level="${activeLevel}"]`);
    if (activeLevelEl) {
      activeLevelEl.classList.add('active');
    }
    
    // Unlock levels based on tier
    if (this.userTier !== 'free') {
      const unlockedLevel = levelMap[this.userTier];
      for (let i = 1; i <= unlockedLevel; i++) {
        const levelEl = document.querySelector(`[data-level="${i}"]`);
        if (levelEl) {
          levelEl.classList.remove('locked');
        }
      }
    }
  }
  
  upgradeToTier(tier) {
    this.userTier = tier;
    localStorage.setItem('languageTier', tier);
    this.updateLanguageDisplay();
    this.updateIntensityBar();
    
    // Add visual effect
    const sampleEl = document.getElementById('languageSample');
    if (sampleEl) {
      sampleEl.classList.add(`${tier}-effect`);
      setTimeout(() => {
        sampleEl.classList.remove(`${tier}-effect`);
      }, 1000);
    }
  }
}

function showLanguageModal(tier) {
  document.getElementById('languageModal').classList.remove('hidden');
  document.body.style.overflow = 'hidden';
  
  // Track analytics
  if (window.trackGoal) {
    window.trackGoal('language_paywall_view', {
      tier: tier,
      current_tier: localStorage.getItem('languageTier') || 'free'
    });
  }
}

function closeLanguageModal() {
  document.getElementById('languageModal').classList.add('hidden');
  document.body.style.overflow = '';
}

function selectLanguageTier(tier) {
  localStorage.setItem('languageTier', tier);
  
  // Track conversion
  if (window.trackGoal) {
    window.trackGoal('language_tier_selected', {
      tier: tier,
      price: tier === 'spicy' ? 7 : tier === 'savage' ? 15 : 30
    });
  }
  
  // Redirect to subscription
  window.location.href = `/subscribe/?tier=language-${tier}&feature=provocative-language`;
}

function takeLanguageChallenge() {
  const challengeModal = document.createElement('div');
  challengeModal.innerHTML = `
    <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 10001; display: flex; align-items: center; justify-content: center; padding: 20px;">
      <div style="background: white; padding: 30px; border-radius: 16px; max-width: 600px; width: 100%;">
        <h3 style="margin: 0 0 20px 0;">🧠 Corporate Insult Mastery Challenge</h3>
        
        <div style="margin-bottom: 20px;">
          <p style="font-weight: bold; margin-bottom: 15px;">Complete this corporate criticism:</p>
          <p style="background: #f8f9fa; padding: 15px; border-radius: 8px; font-style: italic;">
            "The pharmaceutical company's pricing strategy was..."
          </p>
          
          <div style="display: grid; gap: 10px; margin-top: 15px;">
            <label style="display: flex; align-items: center; padding: 10px; border: 1px solid #ddd; border-radius: 8px; cursor: pointer;">
              <input type="radio" name="challenge" value="wrong1" style="margin-right: 10px;">
              "...unfortunate for some consumers."
            </label>
            <label style="display: flex; align-items: center; padding: 10px; border: 1px solid #ddd; border-radius: 8px; cursor: pointer;">
              <input type="radio" name="challenge" value="correct" style="margin-right: 10px;">
              "...a predatory scheme designed to extract maximum profit from human suffering."
            </label>
            <label style="display: flex; align-items: center; padding: 10px; border: 1px solid #ddd; border-radius: 8px; cursor: pointer;">
              <input type="radio" name="challenge" value="wrong2" style="margin-right: 10px;">
              "...a business decision with mixed outcomes."
            </label>
          </div>
        </div>
        
        <div style="display: flex; gap: 10px;">
          <button onclick="submitLanguageChallenge()" style="flex: 1; background: #fd79a8; color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: bold;">
            Submit Answer
          </button>
          <button onclick="closeLanguageChallenge()" style="background: #636e72; color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer;">
            Skip
          </button>
        </div>
        
        <p style="font-size: 12px; color: #666; margin: 15px 0 0 0; text-align: center;">Master corporate criticism for language upgrades!</p>
      </div>
    </div>
  `;
  
  document.body.appendChild(challengeModal);
  
  window.submitLanguageChallenge = () => {
    const selected = document.querySelector('input[name="challenge"]:checked');
    if (selected) {
      document.body.removeChild(challengeModal);
      if (selected.value === 'correct') {
        alert('🌶️ Excellent! You earned 24 hours of Spicy language access!');
        grantTemporaryLanguageAccess('spicy');
      } else {
        alert('🤔 Not quite, but you still earned 12 hours of Spicy access for trying!');
        grantTemporaryLanguageAccess('spicy');
      }
      closeLanguageModal();
    }
  };
  
  window.closeLanguageChallenge = () => {
    document.body.removeChild(challengeModal);
  };
  
  if (window.trackGoal) {
    window.trackGoal('language_challenge_started', {});
  }
}

function shareForLanguage() {
  const shareText = `🌶️ I just discovered how language intensity is monetized on EVIL1.ORG! Check out their provocative language subscription demo: ${window.location.href}`;
  
  if (navigator.share) {
    navigator.share({
      title: 'EVIL1.ORG - Provocative Language Demo',
      text: shareText,
      url: window.location.href
    }).then(() => {
      alert('🎉 Thanks for sharing! You earned 48 hours of Spicy language access!');
      grantTemporaryLanguageAccess('spicy');
      closeLanguageModal();
    });
  } else {
    navigator.clipboard.writeText(shareText).then(() => {
      alert('🎉 Share text copied! Paste it anywhere to earn Spicy language access!');
      grantTemporaryLanguageAccess('spicy');
      closeLanguageModal();
    });
  }
  
  if (window.trackGoal) {
    window.trackGoal('language_shared', {});
  }
}

function submitLanguageFeedback() {
  const feedbackModal = document.createElement('div');
  feedbackModal.innerHTML = `
    <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 10001; display: flex; align-items: center; justify-content: center; padding: 20px;">
      <div style="background: white; padding: 30px; border-radius: 16px; max-width: 500px; width: 100%;">
        <h3 style="margin: 0 0 20px 0;">💭 Suggest Corporate Insults</h3>
        
        <div style="margin-bottom: 20px;">
          <label style="display: block; margin-bottom: 10px; font-weight: bold;">
            Your creative corporate insult or criticism:
          </label>
          <textarea id="insultFeedback" style="width: 100%; height: 120px; padding: 10px; border: 1px solid #ddd; border-radius: 8px; resize: vertical;" placeholder="Share your most creative way to describe corporate greed and manipulation..."></textarea>
        </div>
        
        <div style="margin-bottom: 20px;">
          <label style="display: block; margin-bottom: 10px; font-weight: bold;">
            Intensity level:
          </label>
          <select id="intensityLevel" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px;">
            <option value="spicy">🌶️ Spicy - Pointed but professional</option>
            <option value="savage">🔥 Savage - No holds barred</option>
            <option value="nuclear">☢️ Nuclear - Maximum intensity</option>
          </select>
        </div>
        
        <div style="display: flex; gap: 10px;">
          <button onclick="submitInsultFeedback()" style="flex: 1; background: #fd79a8; color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: bold;">
            Submit Insult
          </button>
          <button onclick="closeFeedback()" style="background: #636e72; color: white; border: none; padding: 12px 20px; border-radius: 8px; cursor: pointer;">
            Cancel
          </button>
        </div>
        
        <p style="font-size: 12px; color: #666; margin: 15px 0 0 0; text-align: center;">Creative submissions earn premium language access!</p>
      </div>
    </div>
  `;
  
  document.body.appendChild(feedbackModal);
  
  window.submitInsultFeedback = () => {
    const feedback = document.getElementById('insultFeedback').value;
    const intensity = document.getElementById('intensityLevel').value;
    
    if (feedback.length > 10) {
      document.body.removeChild(feedbackModal);
      alert(`🎉 Creative ${intensity} insult submitted! You earned 1 week of ${intensity} language access!`);
      grantTemporaryLanguageAccess(intensity);
      closeLanguageModal();
      
      if (window.trackGoal) {
        window.trackGoal('language_feedback_submitted', { 
          intensity: intensity,
          feedback_length: feedback.length
        });
      }
    } else {
      alert('Please write at least a few words for your corporate insult!');
    }
  };
  
  window.closeFeedback = () => {
    document.body.removeChild(feedbackModal);
  };
}

function grantTemporaryLanguageAccess(tier) {
  const languageSystem = window.provocativeLanguageSystem;
  if (languageSystem) {
    languageSystem.upgradeToTier(tier);
    
    // Set expiration
    const expiration = new Date();
    expiration.setHours(expiration.getHours() + 24); // 24 hours
    localStorage.setItem('languageTierExpiration', expiration.toISOString());
  }
}

// Initialize provocative language system when page loads
document.addEventListener('DOMContentLoaded', function() {
  window.provocativeLanguageSystem = new ProvocativeLanguageSystem();
  
  // Check for tier expiration
  const expiration = localStorage.getItem('languageTierExpiration');
  if (expiration && new Date() > new Date(expiration)) {
    localStorage.setItem('languageTier', 'free');
    localStorage.removeItem('languageTierExpiration');
    window.provocativeLanguageSystem.userTier = 'free';
    window.provocativeLanguageSystem.updateLanguageDisplay();
    window.provocativeLanguageSystem.updateIntensityBar();
  }
});
</script>